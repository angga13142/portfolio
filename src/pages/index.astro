---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import ProjectCard from '../components/ProjectCard.jsx';
import projects from '../data/projects.json';

const featured = projects.slice(0,3);
---
<BaseLayout title="Muhammad Nurhidayat Gani">
  <Header />
  <main class="max-w-6xl mx-auto px-4 py-12 sm:py-20">
    <!-- HERO SECTION - Dark-First Design with Parallax -->
    <section class="mb-32 py-16 relative noise-texture parallax-container" data-fade-in="0">
      <div class="max-w-4xl relative z-10 parallax-layer parallax-slow">
        <h1 class="hero-text text-gray-50 mb-6">
          Crafting Digital <span class="gradient-text-animated">Experiences</span>
        </h1>
        <p class="text-xl sm:text-2xl text-gray-400 mb-4 max-w-2xl">
          Heavy Equipment Operator â†’ Software Developer
        </p>
        <p class="text-lg text-gray-500 mb-10 max-w-2xl">
          Membangun sistem dengan presisi operasional. Setiap kode ditulis dengan testing ketat dan monitoring real-time.
        </p>
        <div class="flex flex-wrap gap-4">
          <a href="/projects" class="cta-button magnetic-button inline-block pulse-glow">
            Lihat Proyek Saya
          </a>
          <a href="/about" class="px-8 py-4 border-2 border-gray-600 text-gray-300 rounded-lg font-semibold hover:border-primary-500 hover:text-primary-400 transition-all magnetic-button">
            Baca Kisah Saya
          </a>
        </div>
      </div>
    </section>
    
    <!-- FEATURED PROJECTS -->
    <section class="mb-32" id="proyek" data-fade-in="100">
      <h2 class="text-3xl font-bold text-gray-50 mb-8">Proyek Unggulan</h2>
      <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
        {featured.map((p, i) => <ProjectCard project={p} key={p.slug} />)}
      </div>
    </section>
    
    <!-- ABOUT PREVIEW -->
    <section class="mb-32 max-w-3xl" data-fade-in="200">
      <h2 class="text-3xl font-bold text-gray-50 mb-6">Perkenalan Singkat</h2>
      <p class="text-lg leading-relaxed text-gray-400 mb-6">
        Saya transisi dari Heavy Equipment Operator (Excavator) dengan track record <span class="text-primary-400 font-semibold">95% efisiensi operasional</span>, menjadi software developer yang fokus membangun sistem dengan reliabilitas dan presisi yang sama.
      </p>
      <p class="text-lg leading-relaxed text-gray-400 mb-6">
        Setiap sistem yang saya bangun menerapkan prinsip yang sama: testing ketat, monitoring real-time, dan optimasi performa.
      </p>
      <a href="/about" class="text-primary-400 text-lg font-semibold hover:text-primary-300 transition inline-flex items-center gap-2 animated-link">
        Pelajari lebih lanjut 
        <svg class="w-5 h-5 arrow-slide" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
        </svg>
      </a>
    </section>
    
    <!-- CTA SECTION -->
    <section class="py-20 border-t border-gray-600/30 text-center" data-fade-in="300">
      <h2 class="text-4xl sm:text-5xl font-bold text-gray-50 mb-6">
        Siap Membangun Sesuatu <span class="gradient-text">Luar Biasa?</span>
      </h2>
      <p class="text-xl text-gray-400 mb-10 max-w-2xl mx-auto">
        Mari diskusikan ide atau kebutuhan proyek Anda. Saya siap membantu mewujudkannya.
      </p>
      <a href="/contact" class="cta-button magnetic-button inline-block text-lg pulse-glow">
        Hubungi Saya Sekarang
      </a>
    </section>
  </main>
</BaseLayout>

<script>
  // Parallax scroll effect
  function initParallax() {
    const parallaxElements = document.querySelectorAll('.parallax-layer');
    if (!parallaxElements.length) return;

    // Check for reduced motion preference
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReducedMotion) return;

    let ticking = false;

    const updateParallax = () => {
      const scrollY = window.scrollY;
      
      parallaxElements.forEach((element) => {
        if (element.classList.contains('parallax-slow')) {
          element.style.transform = `translateY(${scrollY * 0.2}px)`;
        } else if (element.classList.contains('parallax-medium')) {
          element.style.transform = `translateY(${scrollY * 0.4}px)`;
        } else if (element.classList.contains('parallax-fast')) {
          element.style.transform = `translateY(${scrollY * 0.6}px)`;
        }
      });

      ticking = false;
    };

    const handleScroll = () => {
      if (!ticking) {
        window.requestAnimationFrame(updateParallax);
        ticking = true;
      }
    };

    window.addEventListener('scroll', handleScroll, { passive: true });
  }

  // Initialize on page load
  document.addEventListener('astro:page-load', initParallax);
  initParallax();
</script>
